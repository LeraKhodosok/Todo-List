/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/script.js":
/*!**************************!*\
  !*** ./src/js/script.js ***!
  \**************************/
/***/ (() => {

//дата
var date = new Date();
var d = document.querySelector('.day');
var m = document.querySelector('.month');
var y = document.querySelector('.year');
var w = document.querySelector('.week'); //окно для добавления записи

var new_item = document.querySelector('.new_item');
var popup = document.querySelector('.modal');
var main = document.querySelector('.main'); //кнопки для добавления/удаления

var cancel = document.querySelector('.cancel'); //input для записи

var inputElement = document.querySelector('.add_input'); //дата

var month = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var week = ["SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY"];
d.innerHTML = date.getDate().toString();
m.innerHTML = month[date.getMonth().toString()];
y.innerHTML = date.getFullYear().toString();
w.innerHTML = week[date.getDay().toString()]; //вычеркивание записи

function checkParent(element, parent) {
  return element.closest(parent);
}

var list = document.querySelector('.list_wraper');
var edit = document.querySelector('.edit');
var cancelEdit = document.querySelector('.cancel_edit');
var editInput = document.querySelector('.edit_input');
cancelEdit.addEventListener('click', function () {
  edit.classList.add('hide');
  edit.classList.remove('active');
  main.classList.remove('active');
  errorEdit.classList.remove('active');
});
var spanForEdit; //окно с добавлением записи

new_item.addEventListener('click', function () {
  popup.classList.add('active');
  main.classList.add('active');
  popup.classList.remove('hide');
  error.classList.remove('active');
});
cancel.addEventListener('click', function () {
  main.classList.remove('active');
  popup.classList.add('hide');
  popup.classList.remove('active');
  error.classList.remove('active');
});
var addInput = document.querySelector('input');
var todos = [];

function addTodo(item) {
  if (item !== '') {
    var todo = {
      id: Date.now(),
      text: item,
      completed: false
    };
    todos.push(todo);
    addToLocalStorage(todos);
    addInput.value = '';
    main.classList.remove('active');
    popup.classList.add('hide');
    popup.classList.remove('active');
    clearInput(inputElement);
  }
}

function renderTodos(todos) {
  list.innerHTML = '';
  todos.forEach(function (item) {
    var item1 = document.createElement('div');
    item1.classList.add('list-item');
    item1.setAttribute('data-key', item.id);
    var title = document.createElement('span');
    title.innerText = item.text;
    var controls = document.createElement('div');
    controls.classList.add('controls');
    var rewriteBtn = document.createElement('i');
    rewriteBtn.classList.add('fa');
    rewriteBtn.classList.add('fa-pencil');
    var deleteBtn = document.createElement('i');
    deleteBtn.classList.add('fa');
    deleteBtn.classList.add('fa-trash-o');
    var checkbox = document.createElement('input');
    checkbox.setAttribute('type', 'checkbox');
    checkbox.classList.add('check');
    item1.appendChild(title);
    controls.appendChild(rewriteBtn);
    controls.appendChild(deleteBtn);
    controls.appendChild(checkbox);
    item1.appendChild(controls);
    list.appendChild(item1);

    if (item.completed === true) {
      checkbox.checked = true;
      title.classList.add('active');
    }
  });
}

function addToLocalStorage(todos) {
  localStorage.setItem('todos', JSON.stringify(todos));
  renderTodos(todos);
}

function toggle(id) {
  todos.forEach(function (item) {
    if (+item.id === +id) {
      item.completed = !item.completed;
    }
  });
  addToLocalStorage(todos);
}

function deleteTodo(id) {
  todos = todos.filter(function (item) {
    return +item.id !== +id;
  });
  addToLocalStorage(todos);
}

function editTodo(text, id) {
  todos.forEach(function (item) {
    if (+item.id === +id) {
      item.text = text;
    }
  });
  addToLocalStorage(todos);
}

function getFromLocalStorage() {
  var reference = localStorage.getItem('todos');

  if (reference) {
    todos = JSON.parse(reference);
    renderTodos(todos);
  }
}

var error = document.querySelector('.error'); //кнопка для добавления новой записи

var addByInput = document.querySelector('.add_btn');
addByInput.addEventListener('click', function () {
  addTodo(inputElement.value);
  errorInput(inputElement);
});

function errorInput(text) {
  if (text.value == '') {
    error.classList.add('active');
  } else {
    error.classList.remove('active');
  }
}

getFromLocalStorage();
list.addEventListener('click', function (e) {
  if (checkParent(e.target, '.controls')) {
    if (e.target.classList.contains('check')) {
      toggle(e.target.parentElement.parentElement.dataset.key);
    } else if (e.target.classList.contains('fa-trash-o')) {
      deleteTodo(e.target.parentElement.parentElement.dataset.key);
    } else {
      edit.classList.add('active');
      edit.classList.remove('hide');
      main.classList.add('active');
      spanForEdit = e.target.parentElement.previousElementSibling;
      editInput.value = spanForEdit.innerText;
    }
  }
}); //очистка input

function clearInput(text) {
  text.value = '';
} //клик вне popUp


document.addEventListener('click', function (e) {
  var click = e.target;

  if (!checkParent(click, '.modal') && !click.classList.contains('new_item') && !click.classList.contains('fa-pencil')) {
    popup.classList.remove('active');
    edit.classList.remove('active');
    main.classList.remove('active');
  }
});
var editBtn = document.querySelector('.edit_btn');
var errorEdit = document.querySelector('.edit_error');
editBtn.addEventListener('click', function () {
  if (editInput.value === '') {
    errorEdit.classList.add('active');
  } else {
    editTodo(editInput.value, spanForEdit.parentElement.dataset.key);
    spanForEdit.innerText = editInput.value;
    errorEdit.classList.remove('active');
    edit.classList.add('hide');
    main.classList.remove('active');
  }
});
var deleteItem = document.querySelector('.delete_list');
deleteItem.addEventListener('click', function () {
  list.innerHTML = '';
  localStorage.clear();
  todos = [];
});

/***/ }),

/***/ "./src/scss/main.scss":
/*!****************************!*\
  !*** ./src/scss/main.scss ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _scss_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scss/main.scss */ "./src/scss/main.scss");
/* harmony import */ var _js_script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/script */ "./src/js/script.js");
/* harmony import */ var _js_script__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_script__WEBPACK_IMPORTED_MODULE_1__);
// styles


// js

})();

/******/ })()
;
//# sourceMappingURL=main.min.js.map